(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===e(o)?o:String(o)),i)}var o}var r,n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,i;return n=e,(i=[{key:"startSlideShow",value:function(){if(!r){var e=this;r=setInterval(function t(){return e.onImageNext(),t}(),2e3)}}},{key:"stopSlideShow",value:function(){clearInterval(r),null!==(r=null)&&(r=null)}},{key:"run",value:function(){var e=".gallery__item",t=document.querySelectorAll(e),r=document.querySelector(".js-slider");this.initEvents(t,r),this.initCustomEvents(t,r,e)}},{key:"initEvents",value:function(e,t){var r=this;e.forEach((function(e){e.addEventListener("click",(function(e){r.fireCustomEvent(e.currentTarget,"js-slider-img-click")}))}));var n=t.querySelector(".js-slider__nav--next");n.addEventListener("click",(function(e){e.stopPropagation(),r.onImageNext()})),n.addEventListener("mouseenter",(function(){r.stopSlideShow()})),n.addEventListener("mouseleave",(function(){r.startSlideShow()}));var i=t.querySelector(".js-slider__nav--prev");i.addEventListener("click",(function(e){e.stopPropagation(),r.onImagePrev()})),i.addEventListener("mouseenter",(function(){r.stopSlideShow()})),i.addEventListener("mouseleave",(function(){r.startSlideShow()})),t.querySelector(".js-slider__zoom").addEventListener("click",(function(){r.stopSlideShow(),r.onClose()}))}},{key:"fireCustomEvent",value:function(e,t){console.log(e.className,"=>",t);var r=new CustomEvent(t,{bubbles:!0});e.dispatchEvent(r)}},{key:"initCustomEvents",value:function(e,t,r){var n=this;e.forEach((function(e){e.addEventListener("js-slider-img-click",(function(e){n.onImageClick(e,t,r)}))})),t.addEventListener("js-slider-img-next",this.onImageNext),t.addEventListener("js-slider-img-prev",this.onImagePrev),t.addEventListener("js-slider-close",(function(){n.onClose(),n.stopSlideShow()}))}},{key:"getGroupName",value:function(e,t){var r=e.currentTarget.getAttribute("data-slider-group-name");return Array.from(document.querySelectorAll(t)).filter((function(e){return e.getAttribute("data-slider-group-name")===r}))}},{key:"createThumbs",value:function(e,t,r){var n=document.querySelector(".js-slider__thumbs"),i=document.querySelector(".js-slider__thumbs-item");e.forEach((function(e){var t=e.querySelector("img"),r=i.cloneNode([!0]);r.classList.remove("js-slider__thumbs-item--prototype");var o=t.getAttribute("src");r.querySelector("img").setAttribute("src",o),n.appendChild(r)})),Array.from(n.querySelectorAll("img")).forEach((function(e){e.getAttribute("src")===r?e.classList.add("js-slider__thumbs-image--current"):e.classList.remove("js-slider__thumbs-image--current")}))}},{key:"onImageClick",value:function(e,t,r){var n=this;t.classList.add("js-slider--active");var i=e.currentTarget.querySelector("img"),o=this.setNewSrcForCurrImg(i);this.createThumbs(this.getGroupName(e,r),i,o),setTimeout((function(){n.startSlideShow()}),2e3)}},{key:"toggleImgClasses",value:function(e,t){e.classList.remove("js-slider__thumbs-image--current"),t.classList.add("js-slider__thumbs-image--current")}},{key:"setNewSrcForCurrImg",value:function(e){var t=document.querySelector(".js-slider__image"),r=e.getAttribute("src");return t.setAttribute("src",r),r}},{key:"changeImg",value:function(e,t,r){if(e&&!e.classList.contains("js-slider__thumbs-item--prototype")){var n=e.querySelector("img");n&&this.toggleImgClasses(r,n),this.setNewSrcForCurrImg(n)}else this.toggleImgClasses(r,t),this.setNewSrcForCurrImg(t)}},{key:"onImageNext",value:function(e){var t=document.querySelector(".js-slider__thumbs-image--current");if(t){var r=t.parentElement.nextElementSibling,n=t.parentElement.parentElement.querySelector("*:nth-child(2)").querySelector("img");this.changeImg(r,n,t)}}},{key:"onImagePrev",value:function(e){var t=document.querySelector(".js-slider__thumbs-image--current"),r=t.parentElement.previousElementSibling,n=t.parentElement.parentElement.lastElementChild.querySelector("img");this.changeImg(r,n,t)}},{key:"removeActiveSlide",value:function(){document.querySelector(".js-slider").classList.remove("js-slider--active")}},{key:"removeSliderThumbs",value:function(){document.querySelectorAll(".js-slider__thumbs-item").forEach((function(e){e.classList.contains("js-slider__thumbs-item--prototype")||e.parentElement.removeChild(e)}))}},{key:"onClose",value:function(){this.removeActiveSlide(),this.removeSliderThumbs()}}])&&t(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".gallery__item").forEach((function(e){e.dataset.sliderGroupName=Math.random()>.5?"nice":"good"})),new n(".gallery__item").run()}))})();